!function(t){function e(e,s){this.element=t(e),t.extend(this,{container:this.element.parent(),ratio:this.element.height()/this.element.width()},s),this.set()}var s="cover";e.prototype={set:function(){var t=this.container.height(),e=this.container.width(),s=this.ratio>=t/e;s&&!this.fillingWidth&&(this.fillingWidth=!0,this.element.css("width","100%").css("height","auto")),s||(this.fillingWidth=!1,this.element.css("width","auto").css("height","100%"))}},t.fn[s]=function(i){return this.each(function(){t.data(this,"plugin_"+s)||t.data(this,"plugin_"+s,new e(this,i)),"set"===i&&(cover=t.data(this,"plugin_"+s).set())})}}(jQuery);var user1={_id:"84b44ced-a21c-c60f-6c5c-a21a1c623459",name:"boolean",bio:"The best dog there can be",hashtags:["dog","meozer","cute","puppy","love"],upvotes:10,downvotes:3,imageurl:"/images/pet.jpg"},user2={_id:"9e7a82ab-6673-41c9-5332-cb39cd93939d",name:"Lenna",bio:"It's a cat!",hashtags:["cat","meozer","cute"],upvotes:8,downvotes:4,imageurl:"/images/cat.jpg"};!function(){var t=angular.module("paworclaw",["ngAnimate"]);t.directive("httpPrefix",function(){return{restrict:"A",require:"ngModel",link:function(t,e,s,i){function n(t){return t&&!/^(http):\/\//i.test(t)&&-1==="http://".indexOf(t)?(i.$setViewValue("http://"+t),i.$render(),"http://"+t):t}i.$formatters.push(n),i.$parsers.push(n)}}}),t.controller("controller",["$window","$scope","$http","$timeout",function(t,e,s,i){e.justOpened=!0,e.showAddPet=!1,e.isUpvote=!0,e.pets=[user1],e.testrepeat=[{img:"images/pet.jpg"},{img:"images/cat.jpg"},{img:"images/husky.jpg"}],this.loadPets=function(){s.get("/users").success(function(t){e.pets=t}).error(function(){console.log("fail")})},e.updatePet=function(t){s.post("/users/update",t).success(function(){console.log("user posting")}).error(function(){console.log("failed to post")})},this.loadPets(),e.index=0,e.currPet=user1,this.getPercantage=function(t){var e=t.upvotes/(t.upvotes+t.downvotes);return Math.round(100*e)},this.getHashtagString=function(t){for(var e="",s=0;s<t.hashtags.length;s++)e+="#"+t.hashtags[s]+" ";return e=e.trim()},this.next=function(){e.index++,e.index>=e.pets.length&&(e.index=0),e.currPet=e.pets[e.index]},this.upvote=function(){e.currPet.upvotes++,e.currPet._id&&e.updatePet(e.currPet),e.isUpvote="upvote",this.next()},this.downvote=function(){e.currPet.downvotes++,e.currPet._id&&e.updatePet(e.currPet),e.isUpvote="downvote",this.next()},i(function(){e.justOpened=!1},5e3),$(".addpet-container").click(function(t){t.stopPropagation()}),$("html").click(function(){e.$apply(function(){e.showAddPet=!1})}),this.add=function(t){var s={};if(s.name=t.name?t.name.trim():"Boolean",s.bio=t.bio?t.bio.trim():"",s.imageurl=t.imageurl?t.imageurl.trim():"/images/pet.jpg",s.upvotes=1,s.downvotes=1,s.hashtags=[],t.hashtags){t.hashtags=t.hashtags.split(" ");for(var i=0;i<t.hashtags.length;i++)t.hashtags[i].length<2||"#"===t.hashtags[i].substring(0,1)&&(s.hashtags[i]=t.hashtags[i].substring(1,t.hashtags[i].length))}e.updatePet(s),e.currPet=s,e.pets.splice(e.index+1,0,s),e.showAddPet=!1,e.form={},this.next()},this.printThese=function(t,e){console.log("sindex: "+t),console.log("index: "+e)}}])}();